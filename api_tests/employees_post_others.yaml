# ********RoostGPT********

# Test generated by RoostGPT for test swagger-api-test using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Test generated for /employees_post for http method type POST in artillery framework
# RoostTestHash=e5b9d8d67f
# 
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    employees_post_others.csv:
      delimiter: "^|^"
      skipHeader: true

scenarios:
  - name: Non-success API Response Testing for /employees
    flow:
      - log:
          message: "Initiating a test for an invalid POST request with missing required fields."
      - post:
          url: "/employees"
          headers:
            Content-Type: "application/json"
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          payload:
            jobTitle: "System Analyst"
      - expect:
          - notStatusCode: 200
          - hasProperty: error
          - hasHeader: Content-Type
          - headerEquals:
              Content-Type: "application/json"
          - hasProperty: message
      - response:
          hasProperty:
            - error
            - message
          matchRegexp:
            error: "^Validation Error$"
      - think:
          duration: 2

      - log:
          message: "Testing POST with an invalid email format."
      - post:
          url: "/employees"
          headers:
            Content-Type: "application/json"
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          payload:
            name: "John Smith"
            email: "invalid_email"
            jobTitle: "System Analyst"
      - expect:
          - notStatusCode: 200
          - hasProperty: error
          - hasHeader: Content-Type
          - headerEquals:
              Content-Type: "application/json"
          - hasProperty: message
      - response:
          hasProperty:
            - error
            - message
          matchRegexp:
            error: "^Email format is invalid$"
      - think:
          duration: 2

      - log:
          message: "Simulating an unauthorized POST request without the token."
      - post:
          url: "/employees"
          headers:
            Content-Type: "application/json"
          payload:
            name: "John Smith"
            email: "john.smith@acme-corp.com"
            jobTitle: "System Analyst"
      - expect:
          - notStatusCode: 200
          - hasProperty: error
          - hasHeader: Content-Type
          - headerEquals:
              Content-Type: "application/json"
          - hasProperty: message
      - response:
          hasProperty:
            - error
            - message
      - think:
          duration: 2

      - log:
          message: "Testing POST with invalid URL endpoint."
      - post:
          url: "/employee_invalid"
          headers:
            Content-Type: "application/json"
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          payload:
            id: "d290f1ee-6c54-4b01-90e6-d701748f0851"
            name: "John Smith"
            email: "john.smith@acme-corp.com"
            jobTitle: "System Analyst"
      - expect:
          - notStatusCode: 200
          - hasProperty: error
          - hasHeader: Content-Type
          - headerEquals:
              Content-Type: "application/json"
          - hasProperty: message
      - response:
          hasProperty:
            - error
            - message
      - think:
          duration: 2
